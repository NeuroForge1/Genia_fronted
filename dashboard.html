<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GENIA - Dashboard</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#67f8c0">
  <link rel="stylesheet" href="dashboard.css">
  <link rel="stylesheet" href="responsive_fixes.css">
  <script src="config.js"></script>
  <script src="env.js"></script>
  <script src="api_integration.js"></script>
  <script src="supabase_auth.js"></script>
  <script src="services/emailService.js"></script>
  <script src="services/openai_chat.js"></script>
  <script src="services/twilio_whatsapp.js"></script>
  <script src="enhanced_script.js"></script>
  <script src="pwa-register.js"></script>
</head>
<body>
  <div class="dashboard-container">
    <div class="dashboard-header">
      <div class="logo">
        <img src="assets/logo.svg" alt="GENIA Logo">
      </div>
      <div class="user-info">
        <span id="user-name">Cargando...</span>
        <button id="logout-btn">Cerrar sesión</button>
      </div>
    </div>
    
    <div class="dashboard-welcome">
      <h1>Bienvenido a tu Dashboard de GENIA</h1>
      <p>Tu sistema de crecimiento automatizado con IA. Aquí puedes acceder a todos tus clones de IA, ver estadísticas y gestionar tu cuenta.</p>
    </div>
    
    <div class="dashboard-stats">
      <div class="stat-card">
        <h3>Créditos disponibles</h3>
        <p id="credits-available">500</p>
        <button class="upgrade-btn">Obtener más</button>
      </div>
      <div class="stat-card">
        <h3>Días restantes</h3>
        <p id="days-remaining">7</p>
        <button class="upgrade-btn">Ampliar plan</button>
      </div>
      <div class="stat-card">
        <h3>Conversaciones</h3>
        <p id="conversation-count">0</p>
        <button>Ver historial</button>
      </div>
      <div class="stat-card">
        <h3>Clones activos</h3>
        <p id="active-clones">5/5</p>
        <button>Gestionar</button>
      </div>
    </div>
    
    <h2>Tus clones de IA</h2>
    <div class="clones-grid">
      <div class="clone-card">
        <img src="assets/clone-general.jpg" alt="GENIA General">
        <h3>GENIA General</h3>
        <p>Tu asistente general para cualquier tarea relacionada con tu negocio.</p>
        <a href="chat.html?clone=general" class="clone-btn">Chatear</a>
      </div>
      <div class="clone-card">
        <img src="assets/clone-content.jpg" alt="GENIA Content">
        <h3>GENIA Content</h3>
        <p>Especializado en crear contenido persuasivo para tus redes sociales.</p>
        <a href="chat.html?clone=content" class="clone-btn">Chatear</a>
      </div>
      <div class="clone-card">
        <img src="assets/clone-ads.jpg" alt="GENIA Ads">
        <h3>GENIA Ads</h3>
        <p>Experto en crear y optimizar campañas publicitarias efectivas.</p>
        <a href="chat.html?clone=ads" class="clone-btn">Chatear</a>
      </div>
      <div class="clone-card">
        <img src="assets/clone-ceo.jpg" alt="GENIA CEO">
        <h3>GENIA CEO</h3>
        <p>Tu asesor ejecutivo para decisiones estratégicas de negocio.</p>
        <a href="chat.html?clone=ceo" class="clone-btn">Chatear</a>
      </div>
      <div class="clone-card">
        <img src="assets/clone-voice.jpg" alt="GENIA Voice">
        <h3>GENIA Voice</h3>
        <p>Especializado en crear guiones para videos y podcasts.</p>
        <a href="chat.html?clone=voice" class="clone-btn">Chatear</a>
      </div>
    </div>
    
    <h2>Acciones rápidas</h2>
    <div class="quick-actions">
      <a href="whatsapp_config.html" class="action-card">
        <img src="assets/whatsapp-icon.svg" alt="WhatsApp">
        <h3>Conectar WhatsApp</h3>
        <p>Chatea con tus clones desde WhatsApp</p>
      </a>
      <a href="genia_referidos_panel.html" class="action-card">
        <img src="assets/referral-icon.svg" alt="Referidos">
        <h3>Programa de referidos</h3>
        <p>Invita amigos y gana créditos</p>
      </a>
      <a href="genia_marketplace.html" class="action-card">
        <img src="assets/marketplace-icon.svg" alt="Marketplace">
        <h3>Marketplace</h3>
        <p>Descubre nuevos clones y plantillas</p>
      </a>
      <a href="genia_ai_tracker.html" class="action-card">
        <img src="assets/tracker-icon.svg" alt="AI Tracker">
        <h3>AI Tracker</h3>
        <p>Monitorea el progreso de tus tareas</p>
      </a>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Verificar autenticación
      if (typeof geniaApi !== 'undefined' && geniaApi.auth && typeof geniaApi.auth.isAuthenticated === 'function') {
        if (!geniaApi.auth.isAuthenticated()) {
          window.location.href = '/login.html';
          return;
        }
        
        // Obtener información del usuario
        const user = geniaApi.auth.getCurrentUser();
        if (user) {
          document.getElementById('user-name').textContent = user.name || user.email;
        }
      } else {
        console.warn('Sistema de autenticación no disponible. Continuando sin verificación.');
      }
      
      // Manejar cierre de sesión
      document.getElementById('logout-btn').addEventListener('click', function() {
        if (typeof geniaApi !== 'undefined' && geniaApi.auth && typeof geniaApi.auth.logout === 'function') {
          geniaApi.auth.logout()
            .then(() => {
              window.location.href = '/index.html';
            })
            .catch(error => {
              console.error('Error al cerrar sesión:', error);
              alert('Error al cerrar sesión. Por favor, intenta nuevamente.');
            });
        } else {
          console.error('Función de cierre de sesión no disponible');
          window.location.href = '/index.html';
        }
      });
      
      // Cargar estadísticas del usuario (simulado para demostración)
      // En una implementación real, estos datos vendrían de la API
      setTimeout(() => {
        document.getElementById('credits-available').textContent = '450';
        document.getElementById('days-remaining').textContent = '5';
        document.getElementById('conversation-count').textContent = '12';
      }, 1000);
    });
  </script>
</body>
</html>
